<!doctype html>
<html lang="en">
    <head>
        <title>Title</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS v5.2.1 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />

        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        
    </head>

    <body>
        <div
            class="container"
        >
                    <header>
                        <!-- Nav tabs -->
                        <ul
                            class="nav nav-tabs"
                            id="navId"
                            role="tablist"
                        >
                            <li class="nav-item">
                                <a
                                    href="#tab1Id"
                                    class="nav-link active"
                                    data-bs-toggle="tab"
                                    aria-current="page"
                                    >Active</a
                                >
                            </li>
                            <li class="nav-item dropdown">
                                <a
                                    class="nav-link dropdown-toggle"
                                    data-bs-toggle="dropdown"
                                    href="#"
                                    role="button"
                                    aria-haspopup="true"
                                    aria-expanded="false"
                                    >Modulos</a
                                >
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" href="curso.html">Curso</a>
                                    <a class="dropdown-item" href="profesor.html">Profesor</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="#tab4Id">Action</a>
                                </div>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a href="#tab5Id" class="nav-link" data-bs-toggle="tab"
                                    >Another link</a
                                >
                            </li>
                            <li class="nav-item" role="presentation">
                                <a href="#" class="nav-link disabled" data-bs-toggle="tab"
                                    >Disabled</a
                                >
                            </li>
                        </ul>
                        
                        <!-- Tab panes -->
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="tab1Id" role="tabpanel">
                                
                            </div>
                            <div class="tab-pane fade" id="tab2Id" role="tabpanel"></div>
                            <div class="tab-pane fade" id="tab3Id" role="tabpanel"></div>
                            <div class="tab-pane fade" id="tab4Id" role="tabpanel"></div>
                            <div class="tab-pane fade" id="tab5Id" role="tabpanel"></div>
                        </div>

                        
                    </header>
                    <div class="container">
                        <h1>Curso</h1>

                        <div class="container">

                            <div class="mb-3">
                                <label for="" class="form-label">Nombre</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    name="nombre"
                                    id="nombre"
                                    aria-describedby="helpId"
                                    placeholder=""
                                />
                                <small id="helpId" class="form-text text-muted">Ingrese su nombre</small>
                            </div>
                            <div class="mb-3">
                                <label for="" class="form-label">descripcion</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    name="descripcion"
                                    id="descripcion"
                                    aria-describedby="helpId"
                                    placeholder=""
                                />
                                <small id="helpId" class="form-text text-muted">Help text descripcion</small>
                            </div>
                            <div class="mb-3">
                                <label for="" class="form-label">estado</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    name="estado"
                                    id="estado"
                                    aria-describedby="helpId"
                                    placeholder=""
                                />
                                <small id="helpId" class="form-text text-muted">Help text estado</small>
                            </div>
                            <div class="mb-3">
                                <label for="" class="form-label">Id</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    name="id"
                                    id="id"
                                    aria-describedby="helpId"
                                    placeholder=""
                                />
                                <small id="helpId" class="form-text text-muted">Help text Id</small>
                            </div>   
                            <div class="mb-3">
                                <a
                                    name="guardardatos"
                                    id="guardardatos"
                                    class="btn btn-primary"                                    
                                    role="button"
                                    >Guardar</a
                                >

                                                                <a
                                    name="actualizardatos"
                                    id="actualizardatos"
                                    class="btn btn-success"
                                    style="display: none;"
                                    role="button"
                                    >Actualizar</a                                    
                                >

                                <input
                                    onclick="limpiarFormulario()"
                                    class="btn btn-danger"
                                    type="button"
                                    value="Limpiar"
                                />
                                
                            </div>
                            

                        </div>




                        <div
                            class="table-responsive"
                        >
                            <table
                                class="table table-primary"
                            >
                                <thead>
                                    <tr>
                                        <th scope="col">Id</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Decripcion</th>
                                        <th scope="col">Estado</th>
                                        <th scope="col">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="listadatos">
                                
                                    
                                </tbody>
                            </table>
                        </div>
                        
                    </div>
                    <footer>
                        <!-- place footer here -->
                    </footer>
                    <!-- Bootstrap JavaScript Libraries -->



        </div>
        


<script>


    function limpiarFormulario(){
        $("#id").val("");
        $("#nombre").val("");
        $("#descripcion").val("");
        $("#estado").val("");
        $("#guardardatos").show();
        $("#actualizardatos").hide();
    }




$(document).ready(function () {
    
    const API_URL ='http://localhost:3000/api/cursos/';

//Funciones




    function cargarDatos(){
        $.get(API_URL, function(data){
                console.log(data);
                $("#listadatos").empty();
                data.forEach((item) => {
                  $("#listadatos").append(
                   `<tr class="">
                            <td scope="row">${item.id}</td>
                            <td>${item.nombre}</td>
                            <td>${item.descripcion}</td>
                            <td>${item.estado}</td>
                            <td>
                                <a
                                    name=""
                                    id=""
                                    class="btn btn-primary"
                                    onclick="editarDatos('${item.id}','${item.nombre}','${item.descripcion}','${item.estado}')"
                                    role="button"
                                    >Editar</a
                                >
                                
                                <a
                                    name=""
                                    id=""
                                    class="btn btn-danger"
                                    href=""
                                    role="button"
                                    >Elimninar</a
                                >

                            </td>
                        </tr>`);
                });
            }     
        )
    }




    //guardardatos
            /*                    "_id": "6866c6df7192a97383e8093a",
    "id": 123,
    "nombre": "NoSQL",
    "descripcion": "Curso de base de datos no relacionales.",
    "estado": "Activo",
    "__v": 0*/
    $("#guardardatos").click(function(e){
        
        const nuevoDato = {
            nombre: $("#nombre").val() ,
            descripcion: $("#descripcion").val()  ,
            id: $("#id").val() ,
            estado: $("#estado").val() 

        };

        $.ajax({
            url:API_URL,
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(nuevoDato),
            success: function(){
                alert("Se almaceno los datos");
                limpiarFormulario();
                cargarDatos();
            },
            error: function (err){
                alert('error: ' + err);
            }

        });
        
    });


    //actualizardatos


    window.editarDatos = function (id, nombre, descripcion , estado){
        $("#id").val(id);
        $("#nombre").val(nombre);
        $("#descripcion").val(descripcion);
        $("#estado").val(estado);
        $("#guardardatos").hide();
        $("#actualizardatos").show();

    }
//Fin de funciones y eventos    

    cargarDatos();

});


</script>







        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"
        ></script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
